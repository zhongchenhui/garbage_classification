<script type="module">
  import { predict } from './app.js';

  document.getElementById('upload').addEventListener('change', async (e) => {
    const file = e.target.files[0];
    if (!file) return;

    const reader = new FileReader();
    reader.onload = async (e) => {
      const previewImg = document.getElementById('preview');
      previewImg.src = e.target.result;
      
      await new Promise(resolve => previewImg.onload = resolve);
      
      try {
        const predictions = await predict(previewImg);
        // 显示结果逻辑不变...
      } catch (err) {
        console.error('预测失败:', err);
      }
    };
    reader.readAsDataURL(file);
  });
</script>
